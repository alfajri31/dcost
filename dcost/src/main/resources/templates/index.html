<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
</head>
<body>
<section class="m-5 p-5" style="background-color: grey  ;color: white;border-radius: 1rem ">
    <div class="pt-5">
        <h2>DCOST-SIMULATION</h2></div>
    <div class="mt-5 btn btn-primary">SYNC PROGRAM TO SIMULATE</div>
    <div class="pb-5"></div>

    <div>
        <a class="underline text-white">Update your report from sources </a>
        <ul id="report-sources" style="padding-top: 1rem"></ul>
    </div>
</section>

<script>
    $(document).ready(function() {
        $('.btn-primary').click(function() {
            let dataToSend = {
                // Add your JSON data here
                userId: "49b7a371-a487-4fdb-b0d2-4ceb58656f1c",
                digitalPaymentIds: ["ecb6cd26-cc21-4c7d-aecd-e1cae2d99d62","1095eb1c-8611-49e5-a582-054c8037aaae","63279f87-a860-40d1-ad1d-2b298958b84b"]
            };
            $.ajax({
                url: '/dcost-service/subscribe/sync',
                type: 'POST',
                contentType: 'application/json',
                dataType: 'json',
                data:  JSON.stringify(dataToSend),
                success: function(response) {
                    console.log('Sync API response:', response);
                    let inquiryReq = {
                        userId: "49b7a371-a487-4fdb-b0d2-4ceb58656f1c",
                        page: 0,
                        size: 10
                    };
                    // Make the AJAX request
                    $.ajax({
                        url: '/dcost-service/subscribe/inquiry',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify(inquiryReq),
                        success: function(response) {
                            console.log('Server response:', response);
                            $('#report-sources').empty();
                            response.data.forEach(function(item) {
                                $('#report-sources').append(
                                    '<li>' + item.digitalPaymentName + '<div><ul><li>Daily Amount: ' + item.dailyAmount + '</li><li>Monthly Amount: ' + item.monthlyAmount + '</li><li>Yearly Amount: ' + item.yearlyAmount + '</li></ul></div></li>'
                                );
                            });
                        },
                        error: function(xhr, status, error) {
                            console.error('AJAX error:', error);
                        }
                    });
                },
                error: function(xhr, status, error) {
                    console.error('Sync API error:', error);
                }
            });
        });
    });
</script>
</body>
</html>


